import{_ as R,r as D,c as A,o as U,E as V,S as $,a as M,b as o,d as _,e as E,w as t,f as k,t as y,u as a,g as I,s as K,h,i as z,j as l,l as f,k as C,m as n,F as T,n as B,p as N,q as H,v as W,x as X,y as O,z as j,A as G,B as P,C as J}from"./index-243f2949.js";import{_ as F}from"./EditorContent-c7da8fcb.js";const Q=["innerHTML"],Z={__name:"Card",props:{data:{type:Object,required:!0}},setup(m){const e=m,u=D(null),s=A(()=>u.value?u.value.getHTML():"");return U(()=>{u.value=new V({editable:!1,content:e.data.content,extensions:[$]})}),M(()=>{u.value.destroy()}),(i,c)=>{const r=o("n-ellipsis"),w=o("n-card");return _(),E(w,{size:"small",title:`#${m.data.id} - ${m.data.title}`},{"header-extra":t(()=>{var d;return[k(y((d=a(I)(m.data.date))==null?void 0:d.time),1)]}),footer:t(()=>[k(y(a(K).locale.CREATED_BY.replace("{user}",m.data.author)),1)]),default:t(()=>[s.value?(_(),E(r,{key:0,"line-clamp":2,tooltip:!1},{default:t(()=>[h("div",{innerHTML:s.value},null,8,Q)]),_:1})):z("",!0)]),_:1},8,["title"])}}},ee=R(Z,[["__scopeId","data-v-5d116990"]]),ne={style:{display:"flex",gap:"0.5rem","overflow-x":"auto","padding-bottom":"1rem"}},te={__name:"BoxLeft",setup(m){const e=l.activity.results.reduce((s,i)=>(s[i.type]||(s[i.type]=[]),s[i.type].push(i),s),{}),u=Object.keys(e).map(s=>({title:f.value.DASHBOARD.RECENT_ACTIVITES[s.toUpperCase()],values:e[s]}));return(s,i)=>{const c=o("n-divider"),r=o("n-scrollbar"),w=o("n-card"),d=o("n-space");return _(),C(T,null,[h("h3",null,y(a(f).DASHBOARD.RECENT_ACTIVITES.LABEL),1),n(c),n(r,{class:"scrollbar-dashboard-recents"},{default:t(()=>[n(d,{vertical:""},{default:t(()=>[(_(!0),C(T,null,B(a(u),p=>(_(),C(T,null,[p.values&&p.values.length>0?(_(),E(w,{key:p.title,size:"small",title:p.title},{default:t(()=>[n(r,{"x-scrollable":""},{default:t(()=>[h("div",ne,[(_(!0),C(T,null,B(p.values,x=>(_(),E(ee,{style:{display:"inline-block"},key:x.id,data:x},null,8,["data"]))),128))])]),_:2},1024)]),_:2},1032,["title"])):z("",!0)],64))),256))]),_:1})]),_:1})],64)}}},ae=["innerHTML"],oe={__name:"Card",props:{id:Number,title:String,creationDate:Number,expireDate:Number,content:String,author:String},setup(m){const e=m,u=D(null),s=A(()=>u.value?u.value.getHTML():"");U(()=>{u.value=new V({editable:!1,content:e.content,extensions:[$]})}),M(()=>{u.value.destroy()});const i=D(!1),c=D(0),r=D(0),w=A(()=>{const v=D([{key:"view",label:f.value.VIEW}]);return N(102)&&v.value.push({key:"edit",label:f.value.EDIT}),N(103)&&v.value.push({key:"delete",label:f.value.DELETE}),v.value}),d=v=>{v==="view"?(l.announcements.selected=e,l.announcements.showResult=!0):v==="edit"?(l.announcements.edit=e,l.announcements.showEdit=!0):v==="delete"&&W({type:"announcements",id:e.id}),i.value=!1},p=v=>{v.preventDefault(),i.value=!1,X().then(()=>{i.value=!0,c.value=v.clientX,r.value=v.clientY})},x=()=>{i.value=!1};return(v,b)=>{const g=o("n-ellipsis"),S=o("n-space"),Y=o("n-card"),q=o("n-dropdown");return _(),C(T,null,[n(Y,{size:"small",title:m.title,onContextmenu:p},{"header-extra":t(()=>{var L;return[k(y((L=a(I)(m.creationDate))==null?void 0:L.time),1)]}),footer:t(()=>[n(S,{align:"center",justify:"space-between"},{default:t(()=>{var L;return[h("p",null,y(a(f).CREATED_BY.replace("{user}",m.author)),1),h("p",null,y((L=a(H)(m.expireDate))==null?void 0:L.time),1)]}),_:1})]),default:t(()=>[s.value?(_(),E(g,{key:0,"line-clamp":5,tooltip:!1},{default:t(()=>[h("div",{innerHTML:s.value},null,8,ae)]),_:1})):z("",!0)]),_:1},8,["title"]),n(q,{placement:"bottom-start",trigger:"manual",x:c.value,y:r.value,options:w.value,show:i.value,"on-clickoutside":x,onSelect:d},null,8,["x","y","options","show"])],64)}}};const le={__name:"CreateAnnouncement",setup(m){const e=A(()=>l.announcements.new),u=()=>{l.announcements.showCreate=!1,l.announcements.new={title:null,content:null,expireDate:null}},s=A(()=>!e.value.title||!e.value.content||e.value.content=="<p></p>"||!e.value.expireDate);return(i,c)=>{const r=o("n-input"),w=o("n-date-picker"),d=o("n-button"),p=o("n-space"),x=o("n-card"),v=o("n-modal");return _(),E(v,{show:a(l).announcements.showCreate,"onUpdate:show":c[4]||(c[4]=b=>a(l).announcements.showCreate=b),"transform-origin":"center"},{default:t(()=>[n(x,{bordered:!1,size:"small",role:"dialog","aria-modal":"true",style:{width:"40rem"}},{default:t(()=>[n(p,{vertical:""},{default:t(()=>[n(r,{value:e.value.title,"onUpdate:value":c[0]||(c[0]=b=>e.value.title=b)},null,8,["value"]),n(F,{modelValue:e.value.content,"onUpdate:modelValue":c[1]||(c[1]=b=>e.value.content=b),disabled:!1,class:O("incident-notes"),placeholder:a(f).NOTES},null,8,["modelValue","placeholder"]),n(p,{justify:"end",size:"small"},{default:t(()=>[n(w,{size:"small",value:e.value.expireDate,"onUpdate:value":c[2]||(c[2]=b=>e.value.expireDate=b),type:"datetime",placeholder:a(f).PLACEHOLDER.DATE,format:a(j).dateFormat},null,8,["value","placeholder","format"]),n(d,{size:"small",stront:"",secondary:"",type:"warning",onClick:u},{default:t(()=>[k(y(a(f).CANCEL),1)]),_:1}),n(d,{size:"small",stront:"",secondary:"",type:"success",disabled:s.value,onClick:c[3]||(c[3]=b=>a(G)({type:"announcement",data:a(l).announcements.new}))},{default:t(()=>[k(y(a(f).CREATE),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}},se=R(le,[["__scopeId","data-v-345e6a6f"]]);const ce={__name:"EditAnnouncement",setup(m){const e=D({...l.announcements.edit});P(()=>l.announcements.edit,c=>{e.value={...c}});const u=()=>{l.announcements.showEdit=!1,l.announcements.edit={}},s=A(()=>!e.value.title||!e.value.content||e.value.content=="<p></p>"||!e.value.expireDate),i=c=>{l.announcements.edit={...e.value},J(c)};return(c,r)=>{const w=o("n-input"),d=o("n-date-picker"),p=o("n-button"),x=o("n-space"),v=o("n-card"),b=o("n-modal");return _(),E(b,{show:a(l).announcements.showEdit,"onUpdate:show":r[4]||(r[4]=g=>a(l).announcements.showEdit=g),"transform-origin":"center"},{default:t(()=>[n(v,{bordered:!1,size:"small",role:"dialog","aria-modal":"true",style:{width:"40rem"}},{default:t(()=>[n(x,{vertical:""},{default:t(()=>[n(w,{value:e.value.title,"onUpdate:value":r[0]||(r[0]=g=>e.value.title=g)},null,8,["value"]),n(F,{modelValue:e.value.content,"onUpdate:modelValue":r[1]||(r[1]=g=>e.value.content=g),disabled:!1,class:O("incident-notes"),placeholder:a(f).NOTES},null,8,["modelValue","placeholder"]),n(x,{justify:"space-between",size:"small",align:"center"},{default:t(()=>{var g;return[h("p",null,y((g=a(H)(e.value.expireDate))==null?void 0:g.time),1),n(x,{size:"small"},{default:t(()=>[n(d,{size:"small",value:e.value.expireDate,"onUpdate:value":r[2]||(r[2]=S=>e.value.expireDate=S),type:"datetime",placeholder:a(f).PLACEHOLDER.DATE,format:a(j).dateFormat},null,8,["value","placeholder","format"]),n(p,{size:"small",strong:"",secondary:"",type:"warning",onClick:u},{default:t(()=>[k(y(a(f).CANCEL),1)]),_:1}),n(p,{size:"small",strong:"",secondary:"",type:"success",disabled:s.value,onClick:r[3]||(r[3]=S=>i({type:"announcement",data:e.value}))},{default:t(()=>[k(y(a(f).SAVE),1)]),_:1},8,["disabled"])]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}},re=R(ce,[["__scopeId","data-v-06028342"]]);const ue={class:"background"},ie=["innerHTML"],de={__name:"ViewAnnouncement",setup(m){const e=D(null),u=A(()=>e.value?e.value.getHTML():"");return P(()=>l.announcements.showResult,s=>{s?e.value=new V({editable:!1,content:A(()=>l.announcements.selected.content).value,extensions:[$]}):e.value&&(e.value.destroy(),e.value=null)},{immediate:!0}),(s,i)=>{const c=o("n-scrollbar"),r=o("n-space"),w=o("n-card"),d=o("n-modal");return _(),E(d,{show:a(l).announcements.showResult,"onUpdate:show":i[0]||(i[0]=p=>a(l).announcements.showResult=p),"transform-origin":"center"},{default:t(()=>[n(w,{bordered:!1,size:"small",role:"dialog","aria-modal":"true",style:{width:"40rem"}},{footer:t(()=>[n(r,{align:"center",justify:"space-between"},{default:t(()=>{var p;return[h("p",null,y(a(f).CREATED_BY.replace("{user}",a(l).announcements.selected.author)),1),h("p",null,y((p=a(H)(a(l).announcements.selected.expireDate))==null?void 0:p.time),1)]}),_:1})]),default:t(()=>[n(r,{vertical:""},{default:t(()=>[h("h2",ue,y(a(l).announcements.selected.title),1),n(c,{style:{"max-height":"40rem"}},{default:t(()=>[u.value?(_(),C("div",{key:0,class:"background",innerHTML:u.value},null,8,ie)):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}},_e=R(de,[["__scopeId","data-v-b3f7a197"]]),pe={__name:"BoxRight",setup(m){return(e,u)=>{const s=o("font-awesome-icon"),i=o("n-button"),c=o("n-space"),r=o("n-divider"),w=o("n-scrollbar");return _(),C(T,null,[n(c,{size:"small",align:"center",justify:"space-between"},{default:t(()=>[h("h3",null,y(a(f).DASHBOARD.ANNOUNCEMENTS.LABEL),1),a(N)(101)?(_(),E(i,{key:0,size:"tiny",tertiary:"",circle:"",type:"success",onClick:u[0]||(u[0]=d=>a(l).announcements.showCreate=!0)},{default:t(()=>[n(s,{icon:["fas","plus"]})]),_:1})):z("",!0)]),_:1}),n(r),n(w,{"x-scrollable":"",class:"scrollbar-dashboard-announcements"},{default:t(()=>[n(c,{vertical:""},{default:t(()=>[(_(!0),C(T,null,B(a(l).announcements.results,d=>(_(),E(oe,{id:d.id,title:d.title,creationDate:d.creationDate,expireDate:d.expireDate,content:d.content,author:d.author},null,8,["id","title","creationDate","expireDate","content","author"]))),256))]),_:1})]),_:1}),n(se),n(re),n(_e)],64)}}},fe={__name:"index",setup(m){return(e,u)=>{const s=o("n-gi"),i=o("n-grid");return _(),C("div",null,[n(i,{"x-gap":"10",cols:"3","item-responsive":""},{default:t(()=>[n(s,{class:"box",span:"2"},{default:t(()=>[n(te)]),_:1}),n(s,{class:"box"},{default:t(()=>[n(pe)]),_:1})]),_:1})])}}};export{fe as default};
