import{b as r,d as a,k as f,n as C,e as s,i as g,m as l,u as y,s as _,t as x,F as p,w as t,h as P,f as z,M as J,c as R,G as b,T as I,K as L,N as K}from"./index-243f2949.js";import{R as Q}from"./RelatedCard-1683bb11.js";const X={key:1},Z={key:2},ee={key:0},te={key:1},ne={name:"NestedInfo",props:["metadata"]},ie=Object.assign(ne,{setup(e){return(c,v)=>{const k=r("n-divider"),w=r("NestedInfo",!0);return a(!0),f(p,null,C(Object.entries(e.metadata),(u,T)=>(a(),f("div",{key:u[0]},[T!==0&&T!==Object.entries(e.metadata).length-1?(a(),s(k,{key:0})):g("",!0),typeof u[1]=="object"?(a(),f("div",X,[l(w,{metadata:u[1]},null,8,["metadata"])])):(a(),f("div",Z,[y(_).locale.INVENTORY.ITEM_DATA[u[0]]?(a(),f("div",ee,x(y(_).locale.INVENTORY.ITEM_DATA[u[0]].replace("{"+u[0]+"}",u[1])),1)):(a(),f("div",te,x(`${u[0]}: ${u[1]}`),1))]))]))),128)}}}),ae=["src"],le={__name:"Item",props:{label:String,name:String,metadata:Object,count:Number},setup(e){const c=v=>{var k;return((k=Object.keys(v))==null?void 0:k.length)===0};return(v,k)=>{const w=r("font-awesome-icon"),u=r("n-icon"),T=r("n-button"),A=r("n-space"),O=r("n-tooltip"),E=r("n-input"),$=r("n-card");return a(),f("div",null,[l($,{title:e.label,size:"small"},{cover:t(()=>[P("img",{src:y(_).settings.inventory+e.name+".png"?y(_).settings.inventory+e.name+".png":"https://i.imgflip.com/69ui9g.jpg",style:{height:"80px","object-fit":"contain"}},null,8,ae)]),"header-extra":t(()=>[c(e.metadata)?g("",!0):(a(),s(O,{key:0,trigger:"hover",style:{"max-width":"800px"}},{trigger:t(()=>[l(T,{strong:"",secondary:"",circle:"",size:"tiny"},{icon:t(()=>[l(u,null,{default:t(()=>[l(w,{icon:["fas","info"]})]),_:1})]),_:1})]),default:t(()=>[l(A,{vertical:""},{default:t(()=>[l(ie,{metadata:e.metadata},null,8,["metadata"])]),_:1})]),_:1}))]),default:t(()=>[l(E,{value:y(_).locale.INVENTORY.COUNT.replace("{count}",e.count),disabled:"",size:"small"},null,8,["value"])]),_:1},8,["title"])])}}},oe={__name:"ViewTag",props:{id:Number,label:String,color:String,identifier:Number,onClick:Function},setup(e){return(c,v)=>{const k=r("n-tag");return a(),s(k,{bordered:!1,style:J({background:e.color}),closable:"",onClose:v[0]||(v[0]=w=>e.onClick(e.id))},{default:t(()=>[z(x(e.label),1)]),_:1},8,["style"])}}},ce={__name:"Box",props:{name:String,identifier:String,title:String,visible:Boolean,array:[Array,Boolean],onClick:Function},setup(e){const c=e,v=()=>{c.onClick()};function k(d){const o=c.array.findIndex(n=>n.identifier===d);c.array.splice(o,1)}function w(d){const o=c.array.findIndex(n=>n.plate===d);c.array.splice(o,1)}function u(d){const o=c.array.findIndex(n=>n.id===d);c.array.splice(o,1)}const T=()=>{_.show=!1,b.photo.show=!0,K("close"),K("openCamera")},A=R(()=>c.array===!1),O=R(()=>[{key:"open_cam",label:_.locale.CAMERA.OPEN,disabled:A.value},{key:"gallery",label:_.locale.CAMERA.VIEW,disabled:A.value}]),E=d=>{d==="open_cam"?T():d==="gallery"&&(b.photo.gallery=!0),b.photo.name=c.name,b.photo.type="gallery"},$=R(()=>Array.isArray(c.array)?c.array.map(d=>({id:d.id,name:d.label,status:"finished",url:d.source})):[]),U=d=>{const o=d.file.id,n=b.tabs[b.currentTab];n.shared.viewGalleryImage=!1;let m;if(n.key===2?m=n.citizens.stats:n.key===3?m=n.incidents.stats.id?n.incidents.stats:n.incidents.new:n.key===4?m=n.reports.stats.id?n.reports.stats:n.reports.new:n.key===6?m=n.vehicles.stats:n.key===7&&(m=n.evidence.stats.id?n.evidence.stats:n.evidence.new),m.gallery){const N=m.gallery.findIndex(j=>j.id===o);m.gallery.splice(N,1)}},W=d=>{const o=b.tabs[b.currentTab];o.shared.viewRelated=!1;let n;if(o.key===2?n=o.citizens.stats:o.key===3?n=o.incidents.stats.id?o.incidents.stats:o.incidents.new:o.key===4?n=o.reports.stats.id?o.reports.stats:o.reports.new:o.key===6?n=o.vehicles.stats:o.key===7&&(n=o.evidence.stats.id?o.evidence.stats:o.evidence.new),n[c.identifier]){const m=n[c.identifier].findIndex(N=>N.id===d);n[c.identifier].splice(m,1)}};return(d,o)=>{const n=r("font-awesome-icon"),m=r("n-button"),N=r("n-dropdown"),j=r("n-button-group"),B=r("n-space"),h=r("n-gi"),G=r("n-grid"),V=r("n-tag"),q=r("n-list"),M=r("n-icon"),H=r("n-upload");return e.visible?(a(),s(h,{key:0,class:"sub-box"},{default:t(()=>[l(B,{justify:"space-between"},{default:t(()=>[P("h4",null,x(e.title),1),e.identifier==="gallery"?(a(),s(j,{key:0},{default:t(()=>[l(N,{options:O.value,onSelect:E},{default:t(()=>[l(m,{size:"tiny",tertiary:"",disabled:e.array===!1},{default:t(()=>[l(n,{icon:["fas","camera"]})]),_:1},8,["disabled"])]),_:1},8,["options"])]),_:1})):y(b).tabs[y(b).currentTab].key!==2&&y(b).tabs[y(b).currentTab].key!==6?(a(),s(m,{key:1,onClick:v,tertiary:"",circle:"",size:"tiny",disabled:e.array===!1},{default:t(()=>[l(n,{icon:["fas","plus"]})]),_:1},8,["disabled"])):g("",!0)]),_:1}),l(G,{cols:"1"},{default:t(()=>{var D,F,Y;return[e.identifier==="items"?(a(),s(h,{key:0},{default:t(()=>[l(G,{"y-gap":"10","x-gap":"10",cols:2},{default:t(()=>[(a(!0),f(p,null,C(e.array,(i,S)=>(a(),s(h,{key:i.id},{default:t(()=>[l(le,{label:i.label,name:i.name,metadata:i.metadata?i.metadata:{},count:i.count},null,8,["label","name","metadata","count"])]),_:2},1024))),128))]),_:1})]),_:1})):g("",!0),e.identifier==="officers"||e.identifier==="citizens"?(a(),s(h,{key:1},{default:t(()=>[l(I,{name:"slide-fade",tag:"div",class:"transition-flex"},{default:t(()=>[(a(!0),f(p,null,C(e.array,i=>(a(),s(V,{key:i.identifier,bordered:!1,closable:"",onClose:S=>k(i.identifier)},{default:t(()=>[e.identifier==="officers"?(a(),f(p,{key:0},[z(x(y(_).locale.TAG.replace("{identifier}",i.identifier).replace("{fullname}",i.fullname)),1)],64)):e.identifier==="citizens"?(a(),f(p,{key:1},[z(x(y(_).locale.TAG.replace("{identifier}",i.identifier).replace("{fullname}",i.fullname)),1)],64)):g("",!0)]),_:2},1032,["onClose"]))),128))]),_:1})]),_:1})):g("",!0),e.identifier==="incidents"&&((D=e.array)==null?void 0:D.length)>0||e.identifier==="reports"&&((F=e.array)==null?void 0:F.length)>0||e.identifier==="evidence"&&((Y=e.array)==null?void 0:Y.length)>0?(a(),s(h,{key:2},{default:t(()=>[l(B,{vertical:"",size:[10,10]},{default:t(()=>[l(I,{name:"slide-fade"},{default:t(()=>[l(q,{hoverable:"",bordered:"",key:"list",size:"small"},{default:t(()=>[(a(!0),f(p,null,C(e.array,i=>(a(),s(Q,{key:i.id,identifier:e.identifier,id:i.id,title:i.title,author:i.author,date:i.date,function:W},null,8,["identifier","id","title","author","date"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})):g("",!0),e.identifier==="vehicles"?(a(),s(h,{key:3},{default:t(()=>[l(I,{name:"slide-fade",tag:"div",class:"transition-flex"},{default:t(()=>[(a(!0),f(p,null,C(e.array,i=>(a(),s(V,{key:i,bordered:!1,closable:"",onClose:S=>w(i.plate),onClick:S=>y(L)(6,"vehicles",i.plate)},{icon:t(()=>[l(M,{size:"15"},{default:t(()=>[l(n,{icon:["fas","info"]})]),_:1})]),default:t(()=>[z(x(i.name+" (#"+i.plate+")")+" ",1)]),_:2},1032,["onClose","onClick"]))),128))]),_:1})]),_:1})):g("",!0),e.identifier==="tags"?(a(),s(h,{key:4},{default:t(()=>[l(I,{name:"slide-fade",tag:"div",class:"transition-flex"},{default:t(()=>[(a(!0),f(p,null,C(e.array,i=>(a(),s(oe,{key:i.id,id:i.id,label:i.label,color:i.color,identifier:i.identifier,onClick:u},null,8,["id","label","color","identifier"]))),128))]),_:1})]),_:1})):g("",!0),e.identifier==="weapons"?(a(),s(h,{key:5},{default:t(()=>[l(I,{name:"slide-fade",tag:"div",class:"transition-flex"},{default:t(()=>[(a(!0),f(p,null,C(e.array,i=>(a(),s(V,{key:i,bordered:!1,checkable:"",onClick:S=>y(L)(9,"weapons",i.id)},{icon:t(()=>[l(M,{size:"15"},{default:t(()=>[l(n,{icon:["fas","info"]})]),_:1})]),default:t(()=>[z(x(i.label+" (#"+i.serial+")")+" ",1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):g("",!0),e.identifier==="gallery"?(a(),s(h,{key:6},{default:t(()=>[l(H,{"file-list":$.value,"list-type":"image-card",readonly:"","show-trigger":!1,"on-remove":U},null,8,["file-list"])]),_:1})):g("",!0)]}),_:1})]),_:1})):g("",!0)}}};export{ce as _};
