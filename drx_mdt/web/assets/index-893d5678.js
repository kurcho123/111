import{c as L,r as H,l as A,z as R,b as s,d,e as b,w as l,m as t,D as S,u as e,G as a,p as x,H as P,o as N,E as U,S as w,a as $,f as D,t as f,g as k,h as v,s as u,i as C,I as B,k as h,F as O,n as z,W as V,y as F}from"./index-243f2949.js";import{_ as I}from"./TopActions-1d666594.js";import{_ as G}from"./EditorContent-c7da8fcb.js";const K={__name:"Input",setup(p){function o(){P({term:a.tabs[a.currentTab].sop.search,category:a.tabs[a.currentTab].sop.category})}const m=L(()=>{const c=H([{value:-1,label:A.value.PLACEHOLDER.ALL}]);return c.value.push(...R.value.staff.sop.categories),c.value});return(c,n)=>{const _=s("font-awesome-icon"),r=s("n-icon"),g=s("n-input"),T=s("n-select"),E=s("n-input-group");return d(),b(E,null,{default:l(()=>[t(g,{onKeyup:n[0]||(n[0]=S(i=>o(),["enter"])),value:e(a).tabs[e(a).currentTab].sop.search,"onUpdate:value":n[1]||(n[1]=i=>e(a).tabs[e(a).currentTab].sop.search=i),placeholder:e(A).PLACEHOLDER.SEARCH,clearable:"",disabled:!e(x)(1103)},{prefix:l(()=>[t(r,null,{default:l(()=>[t(_,{icon:["fas","magnifying-glass"]})]),_:1})]),_:1},8,["value","placeholder","disabled"]),t(T,{placeholder:e(A).CATEGORY,options:m.value,value:e(a).tabs[e(a).currentTab].sop.category,"onUpdate:value":n[2]||(n[2]=i=>e(a).tabs[e(a).currentTab].sop.category=i),disabled:!e(x)(1103)},null,8,["placeholder","options","value","disabled"])]),_:1})}}},M=["innerHTML"],Y={__name:"Card",props:{id:Number,title:String,content:String,date:Number,category:Number,author:String},setup(p){const o=p;function m(){const _=u.settings.staff.sop.categories.find(r=>r.value===o.category);return _?_.label:u.locale.UNKNOWN_CATEGORY}const c=L(()=>n.value?n.value.getHTML():""),n=H(null);return N(()=>{n.value=new U({editable:!1,content:o.content,extensions:[w]})}),$(()=>{n.value.destroy()}),(_,r)=>{const g=s("n-ellipsis"),T=s("n-tag"),E=s("n-space"),i=s("n-card");return d(),b(i,{onClick:r[0]||(r[0]=y=>e(B)(p.id)),title:"#"+p.id+" "+p.title,hoverable:"",size:"small"},{"header-extra":l(()=>{var y;return[D(f((y=e(k)(p.date))==null?void 0:y.time),1)]}),footer:l(()=>[t(E,{justify:"space-between",align:"center"},{default:l(()=>[v("p",null,f(e(u).locale.AUTHOR.replace("{user}",p.author)),1),t(T,{bordered:!1},{default:l(()=>[D(f(m()),1)]),_:1})]),_:1})]),default:l(()=>[c.value?(d(),b(g,{key:0,"line-clamp":5,tooltip:!1},{default:l(()=>[v("div",{innerHTML:c.value},null,8,M)]),_:1})):C("",!0)]),_:1},8,["title"])}}},j={__name:"BoxLeft",setup(p){return(o,m)=>{const c=s("n-divider"),n=s("n-space"),_=s("n-scrollbar");return d(),h(O,null,[v("h3",null,f(e(u).locale.STAFF.SOP.LABEL),1),t(K),t(c),t(_,{class:"scrollbar-results"},{default:l(()=>[t(n,{vertical:""},{default:l(()=>[(d(!0),h(O,null,z(e(a).tabs[e(a).currentTab].sop.results,r=>(d(),b(Y,{id:r.id,title:r.title,content:r.content,date:r.date,category:r.category,author:r.author},null,8,["id","title","content","date","category","author"]))),256))]),_:1})]),_:1})],64)}}},W={__name:"Top",setup(p){return(o,m)=>(d(),b(I,{target:"sop",buttons:["create","unlink","save","delete","clear"],required:["title","content"],permissions:{create:1104,edit:1105,delete:1106}}))}},q={__name:"Bottom",setup(p){const o=L(()=>a.tabs[a.currentTab].sop.stats.id?a.tabs[a.currentTab].sop.stats:a.tabs[a.currentTab].sop.new),m=L({get:()=>{const c=u.settings.staff.sop.categories.find(n=>n.value===o.value.category);return c?c.value:0},set:c=>{o.value.category=c}});return(c,n)=>{const _=s("n-input"),r=s("n-space"),g=s("n-gi"),T=s("n-select"),E=s("n-grid");return d(),b(r,{vertical:""},{default:l(()=>[t(E,{cols:e(a).tabs[e(a).currentTab].sop.stats.id?4:2,"x-gap":"10"},{default:l(()=>[t(g,null,{default:l(()=>[t(r,{vertical:"",size:"small"},{default:l(()=>[v("h4",null,f(e(u).locale.PLACEHOLDER.TITLE),1),t(_,{placeholder:e(u).locale.PLACEHOLDER.TITLE,value:o.value.title,"onUpdate:value":n[0]||(n[0]=i=>o.value.title=i),clearable:!0},null,8,["placeholder","value"])]),_:1})]),_:1}),e(a).tabs[e(a).currentTab].sop.stats.id?(d(),b(g,{key:0},{default:l(()=>[t(r,{vertical:"",size:"small"},{default:l(()=>[v("h4",null,f(e(u).locale.PLACEHOLDER.AUTHOR),1),t(_,{placeholder:e(u).locale.PLACEHOLDER.AUTHOR,value:o.value.author,"onUpdate:value":n[1]||(n[1]=i=>o.value.author=i),disabled:""},null,8,["placeholder","value"])]),_:1})]),_:1})):C("",!0),e(a).tabs[e(a).currentTab].sop.stats.id?(d(),b(g,{key:1},{default:l(()=>[t(r,{vertical:"",size:"small"},{default:l(()=>[v("h4",null,f(e(u).locale.PLACEHOLDER.DATE),1),t(_,{placeholder:e(u).locale.PLACEHOLDER.DATE,value:e(V)(o.value.date),disabled:""},null,8,["placeholder","value"])]),_:1})]),_:1})):C("",!0),t(g,null,{default:l(()=>[t(r,{vertical:"",size:"small"},{default:l(()=>[v("h4",null,f(e(u).locale.PLACEHOLDER.CATEGORY),1),t(T,{options:e(u).settings.staff.sop.categories,value:m.value,"onUpdate:value":n[2]||(n[2]=i=>m.value=i)},null,8,["options","value"])]),_:1})]),_:1})]),_:1},8,["cols"]),t(G,{modelValue:o.value.content,"onUpdate:modelValue":n[3]||(n[3]=i=>o.value.content=i),disabled:!1,class:F("sop-notes"),placeholder:e(u).locale.PLACEHOLDER.NOTES},null,8,["modelValue","placeholder"])]),_:1})}}},J={__name:"BoxRight",setup(p){const o=u.locale.STAFF.SOP;return(m,c)=>{const n=s("n-space"),_=s("n-divider");return d(),h(O,null,[t(n,{justify:"space-between"},{default:l(()=>[v("h3",null,f(e(a).tabs[e(a).currentTab].legislations.stats.id?e(o).EDIT.replace("{id}","#"+e(a).tabs[e(a).currentTab].legislations.stats.id):e(o).EDIT.replace("{id}","")),1),t(W)]),_:1}),t(_),t(q)],64)}}},ee={__name:"index",setup(p){return(o,m)=>{const c=s("n-gi"),n=s("n-grid");return d(),h("div",null,[t(n,{"x-gap":"10",cols:"3","item-responsive":""},{default:l(()=>[t(c,{class:"box"},{default:l(()=>[t(j)]),_:1}),t(c,{class:"box",span:"0 400:1 600:2"},{default:l(()=>[t(J)]),_:1})]),_:1})])}}};export{ee as default};
