import{b as s,d as r,e as p,w as t,m as a,D as q,u as e,G as n,s as u,H as Y,h as I,t as b,W as G,g as W,I as X,k as x,F as A,n as R,c as U,r as L,i as O,f as h,ap as J,aq as Q,ar as Z,p as ee,T as j,V as te,as as B,N as ne,_ as ae,at as H}from"./index-243f2949.js";import{_ as se}from"./TopActions-1d666594.js";import{_ as le}from"./Photo-33ea15b6.js";import{R as re}from"./RelatedCard-1683bb11.js";const oe={__name:"Input",setup(c){return(d,f)=>{const v=s("font-awesome-icon"),o=s("n-icon"),T=s("n-input");return r(),p(T,{onKeyup:f[0]||(f[0]=q(i=>e(Y)({type:"staff",term:e(n).tabs[e(n).currentTab].staff.search}),["enter"])),value:e(n).tabs[e(n).currentTab].staff.search,"onUpdate:value":f[1]||(f[1]=i=>e(n).tabs[e(n).currentTab].staff.search=i),placeholder:e(u).locale.SEARCH,clearable:""},{prefix:t(()=>[a(o,null,{default:t(()=>[a(v,{icon:["fas","magnifying-glass"]})]),_:1})]),_:1},8,["value","placeholder"])}}},ie={__name:"Card",props:{identifier:String,fullname:String,lastname:String,alias:String,callsign:String,badgenumber:String,status:Boolean,image:String,rank:Number,department:Number,lastSeen:Number},setup(c){const d=c;function f(){u.loading=!0,X({type:"staff",id:d.identifier})}function v(){return u.settings.staff.departments.find(T=>T.value===d.department)}function o(){return v().ranks.find(i=>i.value===d.rank)}return(T,i)=>{const _=s("n-image"),k=s("n-space"),y=s("n-badge"),C=s("n-card");return r(),p(C,{onClick:f,hoverable:"",size:"small"},{footer:t(()=>[a(k,{justify:"space-between"},{default:t(()=>{var l;return[I("div",null,b(v().label??"Unknown")+" | "+b(o().label??"Unknown"),1),I("div",null,b(e(G)(c.lastSeen)+" ("+((l=e(W)(c.lastSeen))==null?void 0:l.time)+")"),1)]}),_:1})]),default:t(()=>[a(k,{justify:"space-between"},{default:t(()=>[a(k,null,{default:t(()=>[a(_,{src:c.image?c.image:e(u).settings.configurations.staff.no_image,height:"64",width:"64","object-fit":"cover","preview-disabled":""},null,8,["src"]),a(k,{vertical:""},{default:t(()=>[I("h3",null,b(c.fullname+" ("+c.alias+")"),1),I("h4",null,b("#"+c.badgenumber)+" | "+b(c.callsign),1)]),_:1})]),_:1}),a(y,{type:c.status?"success":"error",dot:"",processing:""},null,8,["type"])]),_:1})]),_:1})}}},ce={__name:"BoxLeft",setup(c){return(d,f)=>{const v=s("n-divider"),o=s("n-space"),T=s("n-scrollbar");return r(),x(A,null,[I("h3",null,b(e(u).locale.CONFIGURATIONS.STAFF.LABEL),1),a(oe),a(v),a(T,{class:"scrollbar-results_config"},{default:t(()=>[a(o,{vertical:""},{default:t(()=>[(r(!0),x(A,null,R(e(n).tabs[e(n).currentTab].staff.results,i=>(r(),p(ie,{identifier:i.identifier,fullname:i.fullname,alias:i.alias,callsign:i.callsign,badgenumber:i.badgenumber,department:i.department,rank:i.rank,status:i.status,lastSeen:i.lastSeen,image:i.image},null,8,["identifier","fullname","alias","callsign","badgenumber","department","rank","status","lastSeen","image"]))),256))]),_:1})]),_:1})],64)}}},ue={__name:"Top",setup(c){return(d,f)=>(r(),p(se,{target:"staff",buttons:["search","create","unlink","save","clear"],required:["identifier","fullname","alias","callsign","badgenumber","department","rank","roles"]}))}},de={__name:"Bottom",setup(c){const d=U(()=>{const f=n.tabs[n.currentTab].staff;return f.stats.identifier?f.stats:f.new});return(f,v)=>{const o=s("n-image"),T=s("n-space"),i=s("n-input");return r(),x(A,null,[a(T,{justify:"center"},{default:t(()=>[a(o,{width:"250",height:"250","object-fit":"cover",src:d.value.image?d.value.image:e(u).settings.configurations.staff.no_image},null,8,["src"])]),_:1}),a(T,{vertical:""},{default:t(()=>[a(i,{value:d.value.identifier,disabled:"",placeholder:e(u).locale.PLACEHOLDER.STATEID},null,8,["value","placeholder"]),a(i,{value:d.value.fullname?d.value.fullname:null,disabled:"",placeholder:e(u).locale.PLACEHOLDER.FULLNAME},null,8,["value","placeholder"]),a(le,{name:"staff",type:"image",disabled:!d.value.identifier,placeholder:e(u).locale.PLACEHOLDER.PHOTO,modelValue:d.value.image,"onUpdate:modelValue":v[0]||(v[0]=_=>d.value.image=_)},null,8,["disabled","placeholder","modelValue"])]),_:1})],64)}}},fe={__name:"BottomBottom",setup(c){const d=u.locale.PLACEHOLDER,f=U(()=>{const C=n.tabs[n.currentTab].staff;return C.stats.identifier?C.stats:C.new}),v=L(!1),o=L(!1),T=L(!1),i=["alias","callsign","badgenumber","department","rank"],_=L(Date.now()),k=U(()=>{if(f.value.department!==null)return u.settings.staff.departments.find(l=>l.value===f.value.department).ranks??[]}),y=C=>{const l=new Date;return l.setHours(0,0,0,0),C<l.getTime()};return(C,l)=>{const w=s("n-input"),D=s("n-select"),$=s("n-input-group"),F=s("n-gi"),S=s("n-button"),P=s("n-date-picker"),E=s("n-popconfirm"),z=s("n-space"),g=s("n-grid");return r(),p(g,{cols:"1","y-gap":"10"},{default:t(()=>[(r(),x(A,null,R(i,m=>a(F,{class:"sub-box"},{default:t(()=>[a($,null,{default:t(()=>[a(w,{value:e(d)[m.toUpperCase()],style:{width:"50%"},disabled:""},null,8,["value"]),m!=="department"&&m!=="rank"?(r(),p(w,{key:0,value:f.value[m],"onUpdate:value":N=>f.value[m]=N,disabled:!f.value.identifier,placeholder:e(d)[m.toUpperCase()]},null,8,["value","onUpdate:value","disabled","placeholder"])):O("",!0),m==="department"?(r(),p(D,{key:1,value:f.value[m],"onUpdate:value":N=>f.value[m]=N,options:e(u).settings.staff.departments,disabled:!f.value.identifier,"show-checkmark":!1},null,8,["value","onUpdate:value","options","disabled"])):O("",!0),m==="rank"?(r(),p(D,{key:2,value:f.value[m],"onUpdate:value":N=>f.value[m]=N,options:k.value,disabled:!f.value.identifier,"show-checkmark":!1},null,8,["value","onUpdate:value","options","disabled"])):O("",!0)]),_:2},1024)]),_:2},1024)),64)),e(n).tabs[e(n).currentTab].staff.stats.identifier?(r(),p(F,{key:0,class:"sub-box"},{default:t(()=>[a(z,{justify:"center"},{default:t(()=>[e(n).tabs[e(n).currentTab].staff.stats.suspended?e(n).tabs[e(n).currentTab].staff.stats.suspended?(r(),p(E,{key:1,show:o.value,"onUpdate:show":l[6]||(l[6]=m=>o.value=m),"show-icon":!1},{trigger:t(()=>[a(S,{strong:"",secondary:"",type:"info"},{default:t(()=>[h(b(e(u).locale.RESUME),1)]),_:1})]),action:t(()=>[a(S,{strong:"",secondary:"",type:"error",onClick:l[4]||(l[4]=m=>o.value=!1)},{default:t(()=>[h(b(e(u).locale.CANCEL),1)]),_:1}),a(S,{strong:"",secondary:"",type:"success",onClick:l[5]||(l[5]=m=>{e(Q)(e(n).tabs[e(n).currentTab].staff.stats.identifier),o.value=!1})},{default:t(()=>[h(b(e(u).locale.CONFIRM),1)]),_:1})]),_:1},8,["show"])):O("",!0):(r(),p(E,{key:0,show:v.value,"onUpdate:show":l[3]||(l[3]=m=>v.value=m),"show-icon":!1},{trigger:t(()=>[a(S,{strong:"",secondary:"",type:"warning"},{default:t(()=>[h(b(e(u).locale.CONFIGURATIONS.STAFF.SUSPEND),1)]),_:1})]),action:t(()=>[a(S,{strong:"",secondary:"",type:"error",onClick:l[0]||(l[0]=m=>v.value=!1)},{default:t(()=>[h(b(e(u).locale.CANCEL),1)]),_:1}),a(S,{strong:"",secondary:"",type:"success",onClick:l[1]||(l[1]=m=>{e(J)(e(n).tabs[e(n).currentTab].staff.stats.identifier,_.value),v.value=!1})},{default:t(()=>[h(b(e(u).locale.CONFIRM),1)]),_:1})]),default:t(()=>[a(P,{value:_.value,"onUpdate:value":l[2]||(l[2]=m=>_.value=m),placeholder:e(u).locale.PLACEHOLDER.DATE,type:"datetime",format:e(u).settings.dateFormat,"is-date-disabled":y},null,8,["value","placeholder","format"])]),_:1},8,["show"])),a(E,{show:T.value,"onUpdate:show":l[9]||(l[9]=m=>T.value=m),"show-icon":!1},{trigger:t(()=>[a(S,{strong:"",secondary:"",type:"error"},{default:t(()=>[h(b(e(u).locale.CONFIGURATIONS.STAFF.FIRE),1)]),_:1})]),action:t(()=>[a(S,{strong:"",secondary:"",type:"error",onClick:l[7]||(l[7]=m=>T.value=!1)},{default:t(()=>[h(b(e(u).locale.CANCEL),1)]),_:1}),a(S,{strong:"",secondary:"",type:"success",onClick:l[8]||(l[8]=m=>{e(Z)(e(n).tabs[e(n).currentTab].staff.stats.identifier),T.value=!1})},{default:t(()=>[h(b(e(u).locale.CONFIRM),1)]),_:1})]),_:1},8,["show"])]),_:1})]),_:1})):O("",!0)]),_:1})}}},_e={__name:"BoxMiddle",setup(c){const d=u.locale.CONFIGURATIONS.STAFF;return(f,v)=>{const o=s("n-space"),T=s("n-divider"),i=s("n-gi"),_=s("n-grid");return r(),p(_,{cols:"1","y-gap":"10px"},{default:t(()=>[a(i,{class:"sub-sub-box-cfg"},{default:t(()=>[a(o,{justify:"space-between"},{default:t(()=>[I("h3",null,b(e(n).tabs[e(n).currentTab].staff.stats.identifier?e(d).EDIT.replace("{identifier}","#"+e(n).tabs[e(n).currentTab].staff.stats.identifier):e(d).EDIT.replace("{identifier}","")),1),a(ue)]),_:1}),a(T),a(de)]),_:1}),a(i,{class:"sub-sub-box-cfg"},{default:t(()=>[a(fe)]),_:1})]),_:1})}}},me={__name:"Box",props:{identifier:String,title:String,visible:Boolean,array:[Array,Object,Number],onClick:Function},setup(c){const d=U(()=>{const i=n.tabs[n.currentTab].staff;return i.stats.identifier?i.stats:i.new});function f(i){const _=n.tabs[n.currentTab].staff.stats.identifier?n.tabs[n.currentTab].staff.stats:n.tabs[n.currentTab].staff.new,k=_.roles.findIndex(y=>y===i);_.roles.splice(k,1)}function v(i){return n.tabs[n.currentTab].roles.roles.find(_=>_.id===i)}const o=L(!1),T=()=>{o.value=!1,ne("clearActivityData",{identifier:d.value.identifier})};return(i,_)=>{const k=s("font-awesome-icon"),y=s("n-icon"),C=s("n-button"),l=s("n-space"),w=s("n-tag"),D=s("n-popconfirm"),$=s("n-card"),F=s("n-list"),S=s("n-gi");return d.value.identifier?(r(),p(S,{key:0,class:"sub-box"},{default:t(()=>{var P,E,z;return[a(l,{justify:"space-between"},{default:t(()=>[I("h4",null,b(c.title),1),c.identifier==="roles"&&e(ee)(3)?(r(),p(C,{key:0,tertiary:"",circle:"",size:"tiny",onClick:_[0]||(_[0]=g=>e(n).tabs[e(n).currentTab].roles.add=!0)},{icon:t(()=>[a(y,null,{default:t(()=>[a(k,{icon:["fas","plus"]})]),_:1})]),_:1})):O("",!0)]),_:1}),c.identifier==="roles"?(r(),p(l,{key:0,size:"small"},{default:t(()=>[a(j,{name:"slide-fade",tag:"div",class:"transition-flex"},{default:t(()=>[(r(!0),x(A,null,R(c.array,(g,m)=>(r(),p(w,{key:m,bordered:!1,closable:"",onClose:N=>f(g)},{default:t(()=>[h(b(v(g).label),1)]),_:2},1032,["onClose"]))),128))]),_:1})]),_:1})):c.identifier==="activity"&&e(n).tabs[e(n).currentTab].staff.stats.identifier?(r(),p(l,{key:1,size:"small",vertical:""},{default:t(()=>[a($,{size:"small"},te({header:t(()=>[I("h4",null,b(e(u).locale.CONFIGURATIONS.STAFF.DATA),1)]),default:t(()=>[h(" "+b(e(B)(c.array)?e(B)(c.array):e(u).locale.CONFIGURATIONS.STAFF.NO_ACTIVITY),1)]),_:2},[e(B)(c.array)?{name:"header-extra",fn:t(()=>[a(l,{size:"small"},{default:t(()=>[a(D,{show:o.value,"onUpdate:show":_[3]||(_[3]=g=>o.value=g),"show-icon":!1},{trigger:t(()=>[a(C,{size:"small",tertiary:""},{default:t(()=>[a(k,{icon:["fas","clock-rotate-left"]})]),_:1})]),action:t(()=>[a(C,{size:"small",tertiary:"",type:"error",onClick:_[1]||(_[1]=g=>o.value=!1)},{default:t(()=>[h(b(e(u).locale.POPUP.CANCEL),1)]),_:1}),a(C,{size:"small",tertiary:"",type:"success",onClick:_[2]||(_[2]=g=>T())},{default:t(()=>[h(b(e(u).locale.POPUP.CONFIRM),1)]),_:1})]),default:t(()=>[h(" "+b(e(u).locale.POPUP.ACTIVITY)+" ",1)]),_:1},8,["show"]),a(C,{size:"small",tertiary:"",onClick:_[4]||(_[4]=g=>e(n).tabs[e(n).currentTab].staff.viewActivityData=!0)},{default:t(()=>[a(k,{icon:["fas","calendar-days"]})]),_:1})]),_:1})]),key:"0"}:void 0]),1024)]),_:1})):c.identifier==="incidents"&&((P=c.array)==null?void 0:P.length)>0||c.identifier==="reports"&&((E=c.array)==null?void 0:E.length)>0||c.identifier==="evidence"&&((z=c.array)==null?void 0:z.length)>0?(r(),p(S,{key:2},{default:t(()=>[a(l,{vertical:""},{default:t(()=>[a(j,{name:"slide-fade"},{default:t(()=>[a(F,{hoverable:"",bordered:"",key:"list",size:"small"},{default:t(()=>[(r(!0),x(A,null,R(c.array,g=>(r(),p(re,{key:g.id,identifier:c.identifier,id:g.id,title:g.title,author:g.author,date:g.date},null,8,["identifier","id","title","author","date"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})):(r(),p(l,{key:3,size:"small"},{default:t(()=>[(r(!0),x(A,null,R(c.array,(g,m)=>(r(),p(w,{key:m,bordered:!1},{icon:t(()=>[a(y,null,{default:t(()=>[a(k,{icon:["fas","info"]})]),_:1})]),default:t(()=>[h(b(g)+" ",1)]),_:2},1024))),128))]),_:1}))]}),_:1})):O("",!0)}}},pe={__name:"ActivityData",setup(c){const d=L(""),f=U(()=>d.value.trim()?n.tabs[n.currentTab].staff.stats.activity_data.filter(v=>G(v.date).includes(d.value)):n.tabs[n.currentTab].staff.stats.activity_data);return(v,o)=>{const T=s("n-input"),i=s("n-divider"),_=s("n-timeline-item"),k=s("n-timeline"),y=s("n-scrollbar"),C=s("n-card"),l=s("n-modal");return r(),p(l,{show:e(n).tabs[e(n).currentTab].staff.viewActivityData,"onUpdate:show":o[1]||(o[1]=w=>e(n).tabs[e(n).currentTab].staff.viewActivityData=w),"transform-origin":"center"},{default:t(()=>[a(C,{bordered:!1,size:"small",role:"dialog","aria-modal":"true",style:{width:"fit-content",padding:"0.5rem 2rem 0.5rem 2rem"}},{default:t(()=>[a(T,{placeholder:e(u).locale.PLACEHOLDER.FILTER,value:d.value,"onUpdate:value":o[0]||(o[0]=w=>d.value=w)},null,8,["placeholder","value"]),a(i),a(y,{style:{"max-height":"500px"}},{default:t(()=>[a(k,null,{default:t(()=>[(r(!0),x(A,null,R(f.value,w=>(r(),p(_,{type:w.type==="in"?"success":"error",title:w.type==="in"?e(u).locale.CONFIGURATIONS.STAFF.CLOCKED_IN:e(u).locale.CONFIGURATIONS.STAFF.CLOCKED_OUT,time:e(G)(w.date),content:e(B)(w.workTime)},null,8,["type","title","time","content"]))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}},be={__name:"BoxRight",setup(c){n.tabs[n.currentTab].staff;const d=["roles","activity","incidents","reports","evidence"],f=o=>{const T=u.settings.configurations.staff[`show_${o}`],i=T&&n.tabs[n.currentTab].staff.stats.identifier?n.tabs[n.currentTab].staff.stats[o]:n.tabs[n.currentTab].staff.new[o],_=()=>{};return{identifier:o,title:u.locale.BOXES[o.toUpperCase()],visible:T,array:i,onClick:_}},v=U(()=>d.map(o=>f(o)).filter(o=>o.visible));return(o,T)=>{const i=s("n-gi"),_=s("n-space"),k=s("n-scrollbar");return r(),x(A,null,[a(k,null,{default:t(()=>[a(_,{vertical:"",size:[10,10]},{default:t(()=>[(r(!0),x(A,null,R(v.value,(y,C)=>(r(),x(A,null,[y.visible?(r(),p(i,{key:C},{default:t(()=>[a(me,{identifier:y.identifier,title:y.title,visible:y.visible,array:y.array,onClick:y.onClick},null,8,["identifier","title","visible","array","onClick"])]),_:2},1024)):O("",!0)],64))),256))]),_:1})]),_:1}),a(pe)],64)}}};const ge={__name:"AddRoles",setup(c){let d=L(!1);const f=()=>{d.value=!0},v=()=>{d.value=!1},o=U(()=>n.tabs[n.currentTab].staff.stats.identifier?n.tabs[n.currentTab].staff.stats:n.tabs[n.currentTab].staff.new),T=U(()=>H.roles.filter(k=>k.label.toLowerCase().includes(n.tabs[n.currentTab].roles.addSearch.toLowerCase())));function i(k){const y=n.tabs[n.currentTab].staff.stats.identifier?n.tabs[n.currentTab].staff.stats:n.tabs[n.currentTab].staff.new;y.roles.some(C=>C===k)||y.roles.push(k)}function _(k){const y=n.tabs[n.currentTab].staff.stats.identifier?n.tabs[n.currentTab].staff.stats:n.tabs[n.currentTab].staff.new,C=y.roles.findIndex(l=>l===k);y.roles.splice(C,1)}return(k,y)=>{const C=s("n-divider"),l=s("n-space"),w=s("n-input"),D=s("n-tag"),$=s("n-scrollbar"),F=s("n-button"),S=s("n-card"),P=s("n-gi"),E=s("n-grid"),z=s("n-modal");return r(),p(z,{show:e(n).tabs[e(n).currentTab].roles.add,"onUpdate:show":y[1]||(y[1]=g=>e(n).tabs[e(n).currentTab].roles.add=g),"transform-origin":"center","on-after-enter":f,"on-after-leave":v},{default:t(()=>[a(S,{bordered:!1,size:"small",role:"dialog","aria-modal":"true",style:{width:"1200px",height:"800px"}},{default:t(()=>[a(l,{vertical:""},{default:t(()=>[a(l,{justify:"space-between",align:"center",class:"top"},{default:t(()=>[a(l,null,{default:t(()=>[I("p",null,b(e(u).locale.CONFIGURATIONS.ROLES.LABEL),1),a(C,{vertical:""}),I("p",null,b(e(u).locale.CONFIGURATIONS.ROLES.DESCRIPTION),1)]),_:1}),a(w,{placeholder:"Search roles",value:e(n).tabs[e(n).currentTab].roles.addSearch,"onUpdate:value":y[0]||(y[0]=g=>e(n).tabs[e(n).currentTab].roles.addSearch=g)},null,8,["value"])]),_:1}),a($,{style:{"max-height":"730px"}},{default:t(()=>[e(d)?(r(),p(E,{key:0,cols:"3","x-gap":"10","y-gap":"10"},{default:t(()=>[(r(!0),x(A,null,R(T.value,(g,m)=>(r(),p(P,{key:m},{default:t(()=>[a(S,{size:"small",title:g.label,style:{height:"190px",display:"flex","flex-direction":"column"}},{action:t(()=>[o.value.roles.includes(g.id)?O("",!0):(r(),p(F,{key:0,strong:"",secondary:"",type:"success",onClick:N=>i(g.id)},{default:t(()=>[h(b(e(u).locale.ADD),1)]),_:2},1032,["onClick"])),o.value.roles.includes(g.id)?(r(),p(F,{key:1,strong:"",secondary:"",type:"error",onClick:N=>_(g.id)},{default:t(()=>[h(b(e(u).locale.REMOVE),1)]),_:2},1032,["onClick"])):O("",!0)]),default:t(()=>[a($,{style:{"max-height":"70px"}},{default:t(()=>[a(l,{size:"small"},{default:t(()=>[(r(!0),x(A,null,R(g.indexes,(N,M)=>(r(),p(D,{key:M,bordered:!1},{default:t(()=>{var V;return[h(b((V=e(H).indexes.find(K=>K.id===N))==null?void 0:V.label),1)]}),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}},ve=ae(ge,[["__scopeId","data-v-a98830e0"]]),he={__name:"index",setup(c){return(d,f)=>{const v=s("n-gi"),o=s("n-grid");return r(),x("div",null,[a(o,{"x-gap":"10",cols:3},{default:t(()=>[a(v,{class:"config-box"},{default:t(()=>[a(ce)]),_:1}),a(v,null,{default:t(()=>[a(_e)]),_:1}),a(v,{class:"config-box"},{default:t(()=>[a(be)]),_:1})]),_:1}),a(ve)])}}};export{he as default};
