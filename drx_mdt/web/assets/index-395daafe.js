import{b as o,d as n,e as u,w as a,m as i,D as Q,u as t,G as e,l as ee,p as te,H as ne,s as T,k as _,F as p,f as x,t as y,n as z,i as I,I as se,h as V,_ as ae,c as O,y as ie,r as N,J as ce,K as oe,L as re,M as le,x as ue}from"./index-243f2949.js";import{_ as de}from"./TopActions-1d666594.js";import{_ as _e}from"./Photo-33ea15b6.js";import{_ as pe}from"./EditorContent-c7da8fcb.js";import{_ as be}from"./Box-066ea52c.js";import"./RelatedCard-1683bb11.js";const fe={__name:"Input",setup(m){return(b,r)=>{const d=o("font-awesome-icon"),g=o("n-icon"),h=o("n-input");return n(),u(h,{onKeyup:r[0]||(r[0]=Q(C=>t(ne)(t(e).tabs[t(e).currentTab].citizens.search),["enter"])),value:t(e).tabs[t(e).currentTab].citizens.search,"onUpdate:value":r[1]||(r[1]=C=>t(e).tabs[t(e).currentTab].citizens.search=C),placeholder:t(ee).PLACEHOLDER.SEARCH,clearable:"",disabled:!t(te)(201)},{prefix:a(()=>[i(g,null,{default:a(()=>[i(d,{icon:["fas","magnifying-glass"]})]),_:1})]),_:1},8,["value","placeholder","disabled"])}}},me={__name:"Card",props:{identifier:String,fullname:String,lastname:String,licences:Array,tags:Array},setup(m){return(b,r)=>{const d=o("n-tag"),g=o("n-space"),h=o("n-divider"),C=o("n-card");return n(),u(C,{onClick:r[0]||(r[0]=E=>t(se)(m.identifier)),title:m.fullname+" #"+m.identifier,hoverable:"",size:"small"},{default:a(()=>{var E,S,w;return[t(T).settings.citizens.show_licences&&((E=m.licences)==null?void 0:E.length)>1?(n(),_(p,{key:0},[x(y(t(T).locale.BOXES.LICENCES)+" ",1),i(g,null,{default:a(()=>[(n(!0),_(p,null,z(m.licences,(k,A)=>(n(),u(d,{key:A,type:k.type,bordered:!1},{default:a(()=>[x(y(k.label),1)]),_:2},1032,["type"]))),128))]),_:1}),((S=m.tags)==null?void 0:S.length)>1?(n(),u(h,{key:0})):I("",!0)],64)):I("",!0),t(T).settings.citizens.show_tags&&((w=m.tags)==null?void 0:w.length)>1?(n(),_(p,{key:1},[x(y(t(T).locale.BOXES.TAGS)+" ",1),i(g,null,{default:a(()=>[(n(!0),_(p,null,z(m.tags,(k,A)=>(n(),u(d,{key:A,type:k.type,bordered:!1},{default:a(()=>[x(y(k.label),1)]),_:2},1032,["type"]))),128))]),_:1})],64)):I("",!0)]}),_:1},8,["title"])}}},ge={__name:"Results",setup(m){return(b,r)=>{const d=o("n-space"),g=o("n-scrollbar");return n(),u(g,{class:"scrollbar-results"},{default:a(()=>[i(d,{vertical:"",size:[10,10]},{default:a(()=>[(n(!0),_(p,null,z(t(e).tabs[t(e).currentTab].citizens.results,h=>(n(),u(me,{identifier:h.identifier,fullname:h.fullname,licences:h.licences,tags:h.tags},null,8,["identifier","fullname","licences","tags"]))),256))]),_:1})]),_:1})}}},ye={__name:"BoxLeft",setup(m){return(b,r)=>{const d=o("n-divider");return n(),_(p,null,[V("h3",null,y(t(T).locale.CITIZENS.LABEL),1),i(fe),i(d),i(ge)],64)}}},he={__name:"Top",setup(m){return(b,r)=>(n(),u(de,{target:"citizens",buttons:["unlink","save"],permissions:{edit:202}}))}};const Te={class:"grid"},ke={class:"image-wrapper"},ve={__name:"Bottom",setup(m){const b=T.locale.PLACEHOLDER,r=O(()=>e.tabs[e.currentTab].citizens.stats);return(d,g)=>{const h=o("n-image"),C=o("n-badge"),E=o("n-input"),S=o("n-space"),w=o("n-divider");return n(),u(S,{vertical:""},{default:a(()=>[V("div",Te,[V("div",ke,[i(C,{value:r.value.wanted?t(b).WANTED:"",processing:""},{default:a(()=>[i(h,{width:"150",height:"150","object-fit":"cover",src:r.value.image?r.value.image:t(T).settings.citizens.no_image},null,8,["src"])]),_:1},8,["value"])]),i(S,{vertical:""},{default:a(()=>[i(E,{value:r.value.identifier,disabled:"",placeholder:t(b).STATEID},null,8,["value","placeholder"]),i(E,{value:r.value.name,disabled:"",placeholder:t(b).FULLNAME},null,8,["value","placeholder"]),i(_e,{name:"citizens",type:"image",disabled:!r.value.identifier,placeholder:t(b).PHOTO,modelValue:r.value.image,"onUpdate:modelValue":g[0]||(g[0]=k=>r.value.image=k)},null,8,["disabled","placeholder","modelValue"])]),_:1})]),i(w),i(pe,{modelValue:r.value.notes,"onUpdate:modelValue":g[1]||(g[1]=k=>r.value.notes=k),disabled:!r.value.identifier,class:ie("citizen-notes"),placeholder:t(b).NOTES},null,8,["modelValue","disabled","placeholder"])]),_:1})}}},ze=ae(ve,[["__scopeId","data-v-fe897b64"]]),xe={__name:"BoxMiddle",setup(m){const b=T.locale.CITIZENS,r=d=>d.length>10?d.substring(0,10)+"...":d;return(d,g)=>{const h=o("n-space"),C=o("n-divider");return n(),_(p,null,[i(h,{justify:"space-between"},{default:a(()=>[V("h3",null,y(t(e).tabs[t(e).currentTab].citizens.stats.identifier?t(b).EDIT.replace("{identifier}","#"+r(t(e).tabs[t(e).currentTab].citizens.stats.identifier)):t(b).EDIT.replace("{identifier}","")),1),i(he)]),_:1}),i(C),i(ze)],64)}}},Ce={key:1},we={__name:"BoxRight",setup(m){const b=T.locale.CITIZENS,r=["weapons","incidents","reports","gallery"],d=["identity","licences","tags","vehicles","housing","employment","convictions"],g=s=>{const l=T.settings.citizens[`show_${s}`],v=l&&e.tabs[e.currentTab].citizens.stats.identifier?e.tabs[e.currentTab].citizens.stats[s]:!1,B=s==="gallery"?()=>{e.tabs[e.currentTab].shared.addToGallery.type="citizens",e.tabs[e.currentTab].shared.addToGalleryView=!0}:()=>{};return{identifier:s,title:T.locale.BOXES[s.toUpperCase()],visible:l,array:v,onClick:B}},h=O(()=>r.map(s=>g(s)).filter(s=>s.visible)),C=O(()=>d.map(s=>({identifier:s,title:T.locale.BOXES[s.toUpperCase()],visible:T.settings.citizens[`show_${s}`]??!0})).filter(s=>s.visible)),E=()=>{e.tabs[e.currentTab].citizens.addTags=!1},S=N(null),w=N(!1),k=N(0),A=N(0),G=(s,l)=>{s==="grant"?e.tabs[e.currentTab].citizens.GrantLicence(e.tabs[e.currentTab].citizens.stats.identifier,l.value):s==="revoke"&&e.tabs[e.currentTab].citizens.RevokeLicence(e.tabs[e.currentTab].citizens.stats.identifier,l.value),w.value=!1},H=(s,l)=>{s.preventDefault(),S.value=l,ue().then(()=>{w.value=!0,k.value=s.clientX,A.value=s.clientY})},M=()=>{w.value=!1},X=O(()=>{const s=S.value;if(!s)return[];let l=[];return s.type==="error"&&s.grant&&l.push({label:b.GRANT,key:"grant",value:s.key}),s.type==="success"&&s.revoke&&l.push({label:b.REVOKE,key:"revoke",value:s.key}),l}),K=s=>{const l=e.tabs[e.currentTab].charges.results.find(v=>v.id===s);return l?l.label:s},P=s=>e.tabs[e.currentTab].categories.results.find(v=>v.id===s),j=s=>{const l=e.tabs[e.currentTab].charges.results.find(B=>B.id===s),v=P(l.category);return v?v.color:""},F=s=>{console.log(s),e.tabs[e.currentTab].citizens.stats.identity.find(l=>l.column==="points").value=s,console.log(e.tabs[e.currentTab].citizens.stats.identity.find(l=>l.column==="points").value)};return(s,l)=>{const v=o("font-awesome-icon"),B=o("n-icon"),Z=o("n-button"),R=o("n-dropdown"),D=o("n-space"),L=o("n-tag"),W=o("n-input-number"),U=o("n-gi"),J=o("n-grid"),Y=o("n-scrollbar");return n(),u(Y,null,{default:a(()=>[i(J,{"y-gap":"10",cols:1},{default:a(()=>[(n(!0),_(p,null,z(C.value,f=>(n(),u(U,{class:"sub-box"},{default:a(()=>[f.visible?(n(),_(p,{key:0},[f.identifier==="tags"?(n(),u(D,{key:0,justify:"space-between"},{default:a(()=>[V("h4",null,y(f.title),1),i(R,{show:t(e).tabs[t(e).currentTab].citizens.addTags,options:t(T).settings.citizens.tags,onSelect:t(e).tabs[t(e).currentTab].citizens.selectedTag,disabled:!t(e).tabs[t(e).currentTab].citizens.stats.identifier,"on-clickoutside":E},{default:a(()=>[i(Z,{onClick:l[0]||(l[0]=c=>t(e).tabs[t(e).currentTab].citizens.addTags=!t(e).tabs[t(e).currentTab].citizens.addTags),tertiary:"",circle:"",size:"tiny",disabled:!t(e).tabs[t(e).currentTab].citizens.stats.identifier},{icon:a(()=>[i(B,null,{default:a(()=>[i(v,{icon:["fas","plus"]})]),_:1})]),_:1},8,["disabled"])]),_:1},8,["show","options","onSelect","disabled"])]),_:2},1024)):(n(),_("h4",Ce,y(f.title),1)),i(D,null,{default:a(()=>[f.identifier==="identity"?(n(!0),_(p,{key:0},z(t(e).tabs[t(e).currentTab].citizens.stats.identity,c=>(n(),_(p,{key:c.column},[c.column!=="points"?(n(),u(L,{key:0,bordered:!1,type:c.type},{default:a(()=>[x(y(c.label.replace("{"+c.column+"}",c.value)),1)]),_:2},1032,["type"])):c.column==="points"?(n(),u(W,{key:1,size:"small",bordered:!1,min:0,value:c.value,"onUpdate:value":l[1]||(l[1]=$=>F($))},{prefix:a(()=>[x(y(c.label),1)]),_:2},1032,["value"])):I("",!0)],64))),128)):f.identifier==="licences"?(n(),_(p,{key:1},[(n(!0),_(p,null,z(t(e).tabs[t(e).currentTab].citizens.stats.licences,c=>(n(),u(L,{type:c.type,bordered:!1,onContextmenu:ce($=>H($,c),["prevent"])},{default:a(()=>[x(y(c.label),1)]),_:2},1032,["type","onContextmenu"]))),256)),i(R,{placement:"bottom-start",trigger:"manual",x:k.value,y:A.value,options:X.value,show:w.value,"on-clickoutside":M,onSelect:G},null,8,["x","y","options","show"])],64)):f.identifier==="tags"?(n(!0),_(p,{key:2},z(t(e).tabs[t(e).currentTab].citizens.stats.tags,(c,$)=>(n(),u(L,{key:$,type:c.type,bordered:!1,closable:"",onClose:q=>t(e).tabs[t(e).currentTab].citizens.RemoveTag(c.key)},{default:a(()=>[x(y(c.label),1)]),_:2},1032,["type","onClose"]))),128)):f.identifier==="vehicles"?(n(!0),_(p,{key:3},z(t(e).tabs[t(e).currentTab].citizens.stats.vehicles,(c,$)=>(n(),u(L,{key:$,bordered:!1,checkable:"",onClick:q=>t(oe)(6,"vehicles",c.plate)},{icon:a(()=>[i(B,{size:"15"},{default:a(()=>[i(v,{icon:["fas","info"]})]),_:1})]),default:a(()=>[x(y(c.vehicle.charAt(0).toUpperCase()+c.vehicle.slice(1)+" (#"+c.plate+")")+" ",1)]),_:2},1032,["onClick"]))),128)):f.identifier==="housing"?(n(!0),_(p,{key:4},z(t(e).tabs[t(e).currentTab].citizens.stats.housing,c=>(n(),u(L,{key:c,bordered:!1,checkable:"",onClick:$=>t(re)(c.coords)},{icon:a(()=>[i(B,null,{default:a(()=>[i(v,{icon:["fas","info"]})]),_:1})]),default:a(()=>[x(y(c.label)+" ",1)]),_:2},1032,["onClick"]))),128)):f.identifier==="employment"?(n(!0),_(p,{key:5},z(t(e).tabs[t(e).currentTab].citizens.stats.employment,c=>(n(),u(L,{key:c,bordered:!1},{default:a(()=>[x(y(c),1)]),_:2},1024))),128)):f.identifier==="convictions"?(n(!0),_(p,{key:6},z(t(e).tabs[t(e).currentTab].citizens.stats.convictions,c=>(n(),u(L,{key:c,bordered:!1,style:le({background:j(c.id)})},{default:a(()=>[x(y(`${K(c.id)} x${c.amount}`),1)]),_:2},1032,["style"]))),128)):I("",!0)]),_:2},1024)],64)):I("",!0)]),_:2},1024))),256)),(n(!0),_(p,null,z(h.value,(f,c)=>(n(),u(U,{key:c},{default:a(()=>[i(be,{identifier:f.identifier,title:f.title,visible:f.visible,array:f.array,onClick:f.onClick},null,8,["identifier","title","visible","array","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})}}},Ie={__name:"index",setup(m){return(b,r)=>{const d=o("n-gi"),g=o("n-grid");return n(),u(g,{"x-gap":"10",cols:"3"},{default:a(()=>[i(d,{class:"box"},{default:a(()=>[i(ye)]),_:1}),i(d,{class:"box"},{default:a(()=>[i(xe)]),_:1}),i(d,{class:"box"},{default:a(()=>[i(we)]),_:1})]),_:1})}}};export{Ie as default};
