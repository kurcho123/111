import{c as i,G as l,p as g,b as v,d as f,e as y,w as p,k as T,F as k,n as R,m as C,f as U,t as J,u as j,l as G,i as H,A as w,C as x,v as K}from"./index-243f2949.js";const P={__name:"TopActions",props:{target:String,buttons:Array,required:Array,permissions:Object},setup(A){const t=A,e=i(()=>l.tabs[l.currentTab][t.target]),E=i(()=>!t.permissions||g(t.permissions.create)),c=i(()=>!t.permissions||g(t.permissions.edit)),S=i(()=>!t.permissions||g(t.permissions.delete)),N=i(()=>["citizens","vehicles"].includes(t.target)),b=i(()=>"identifier"in e.value.stats&&t.target!="weapons"),r=i(()=>{var a,n,s;return t.target==="weapons"?(a=e.value.stats)==null?void 0:a.id:b.value?(n=e.value.stats)==null?void 0:n.identifier:(s=e.value.stats)==null?void 0:s.id}),m=i(()=>t.required&&t.required.length?t.required.every(n=>{let s=e.value.new[n];return!(Array.isArray(s)&&s.length===0||s==null||s==="")}):!0),q=()=>{l.tabs[l.currentTab].shared.addUser.type="staff",l.tabs[l.currentTab].shared.addUser.view=!0},z=()=>{e.value&&(t.target==="staff"?w({type:"staff",data:e.value.new}):w(e.value.new),_())},F=()=>{e.value&&(e.value.stats={})},O=()=>{e.value&&e.value.stats&&(t.target==="staff"?x({type:"staff",data:e.value.stats}):x(e.value.stats))},V=()=>{var n,s;const a=(s=(n=e.value)==null?void 0:n.stats)==null?void 0:s.id;a&&(e.value&&(e.value.stats={}),K(a))},h={incidents:{title:null,content:null,location:null,author:null,date:null,officers:[],citizens:[],incidents:[],reports:[],evidence:[],vehicles:[],tags:[],gallery:[],criminals:[]},reports:{title:null,content:null,location:null,author:null,date:null,officers:[],citizens:[],incidents:[],reports:[],evidence:[],vehicles:[],tags:[],gallery:[]},evidence:{title:null,category:null,content:null,items:[],tags:[],gallery:[],officers:[],citizens:[],incidents:[],reports:[],evidence:[]},legisilations:{title:null,content:null,category:0},sop:{title:null,content:null,category:0}},_=()=>{h[t.target]&&(e.value.new=JSON.parse(JSON.stringify(h[t.target])))},B=i(()=>{var a,n,s,u,d;return[{id:"search",visible:!((a=e.value.stats)!=null&&a.identifier),onClick:q,disabled:!1,icon:"magnifying-glass",hoverText:"SEARCH"},{id:"create",visible:!r.value&&E.value,onClick:z,disabled:t.target==="staff"?!m.value:!m.value||!((n=e.value.new)!=null&&n.title&&((s=e.value.new)!=null&&s.content)),icon:"pen-to-square",hoverText:"CREATE"},{id:"unlink",visible:b.value&&c.value||r.value||N.value||t.target==="weapons"&&c.value,onClick:F,disabled:!r.value,icon:"link-slash",hoverText:"UNLINK"},{id:"save",visible:c.value,onClick:O,disabled:!r.value,icon:"floppy-disk",hoverText:"SAVE"},{id:"delete",visible:r.value&&S.value,onClick:V,disabled:!1,icon:"trash",hoverText:"DELETE"},{id:"clear",visible:c.value&&(t.target==="staff"&&!((u=e.value.stats)!=null&&u.identifier)||!((d=e.value.stats)!=null&&d.id)&&t.target!=="staff"),onClick:_,disabled:!1,icon:"broom",hoverText:"CLEAR"}]}),I=i(()=>B.value.filter(a=>t.buttons.includes(a.id)));return(a,n)=>{const s=v("font-awesome-icon"),u=v("n-button"),d=v("n-tooltip"),L=v("n-space");return f(),y(L,{size:[5,5]},{default:p(()=>[(f(!0),T(k,null,R(I.value,(o,D)=>(f(),T(k,null,[o.visible?(f(),y(d,{trigger:"hover","show-arrow":!1,key:D},{trigger:p(()=>[C(u,{onClick:o.onClick,disabled:o.disabled,tertiary:"",circle:"",type:"success"},{default:p(()=>[C(s,{icon:["fas",o.icon]},null,8,["icon"])]),_:2},1032,["onClick","disabled"])]),default:p(()=>[U(" "+J(j(G)[o.hoverText]),1)]),_:2},1024)):H("",!0)],64))),256))]),_:1})}}};export{P as _};
