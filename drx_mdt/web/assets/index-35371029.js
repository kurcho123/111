import{b as l,d as _,e as m,w as o,m as r,D as B,u as n,G as e,l as L,p as $,H as S,c as x,r as R,o as A,E as D,S as N,a as O,f as w,t as T,g as U,s as b,h as y,i as E,I as V,k as h,F as g,n as C,y as H}from"./index-243f2949.js";import{_ as I}from"./TopActions-1d666594.js";import{_ as P}from"./EditorContent-c7da8fcb.js";import{_ as M}from"./Box-066ea52c.js";import"./RelatedCard-1683bb11.js";const z={__name:"Input",setup(d){return(u,a)=>{const s=l("font-awesome-icon"),t=l("n-icon"),i=l("n-input");return _(),m(i,{onKeyup:a[0]||(a[0]=B(c=>n(S)(n(e).tabs[n(e).currentTab].reports.search),["enter"])),value:n(e).tabs[n(e).currentTab].reports.search,"onUpdate:value":a[1]||(a[1]=c=>n(e).tabs[n(e).currentTab].reports.search=c),placeholder:n(L).PLACEHOLDER.SEARCH,clearable:"",disabled:!n($)(401)},{prefix:o(()=>[r(t,null,{default:o(()=>[r(s,{icon:["fas","magnifying-glass"]})]),_:1})]),_:1},8,["value","placeholder","disabled"])}}},G=["innerHTML"],K={__name:"Card",props:{id:Number,title:String,date:Number,content:String,author:String},setup(d){const u=d,a=x(()=>s.value?s.value.getHTML():""),s=R(null);return A(()=>{s.value=new D({editable:!1,content:u.content,extensions:[N]})}),O(()=>{s.value.destroy()}),(t,i)=>{const c=l("n-ellipsis"),p=l("n-card");return _(),m(p,{onClick:i[0]||(i[0]=f=>n(V)(d.id)),title:d.title,hoverable:"",size:"small"},{"header-extra":o(()=>{var f;return[w(T((f=n(U)(d.date))==null?void 0:f.time),1)]}),footer:o(()=>[w(T(n(b).locale.CREATED_BY.replace("{user}",d.author)),1)]),default:o(()=>[a.value?(_(),m(c,{key:0,"line-clamp":3,tooltip:!1},{default:o(()=>[y("div",{innerHTML:a.value},null,8,G)]),_:1})):E("",!0)]),_:1},8,["title"])}}},F={__name:"BoxLeft",setup(d){return(u,a)=>{const s=l("n-divider"),t=l("n-space"),i=l("n-scrollbar");return _(),h(g,null,[y("h3",null,T(n(b).locale.REPORTS.LABEL),1),r(z),r(s),r(i,{class:"scrollbar-results"},{default:o(()=>[r(t,{vertical:""},{default:o(()=>[(_(!0),h(g,null,C(n(e).tabs[n(e).currentTab].reports.results,c=>(_(),m(K,{id:c.id,title:c.title,date:c.date,content:c.content,author:c.author},null,8,["id","title","date","content","author"]))),256))]),_:1})]),_:1})],64)}}},j={__name:"Top",setup(d){return(u,a)=>(_(),m(I,{target:"reports",buttons:["create","unlink","save","delete","clear"],required:["title","content"],permissions:{create:402,edit:403,delete:404}}))}},q={__name:"Bottom",setup(d){const u=b.locale.PLACEHOLDER,a=x(()=>{const s=e.tabs[e.currentTab].reports;return s.stats.id?s.stats:s.new});return(s,t)=>{const i=l("n-input"),c=l("n-space");return _(),m(c,{vertical:""},{default:o(()=>[r(i,{placeholder:n(u).TITLE,value:a.value.title,"onUpdate:value":t[0]||(t[0]=p=>a.value.title=p)},null,8,["placeholder","value"]),r(P,{modelValue:a.value.content,"onUpdate:modelValue":t[1]||(t[1]=p=>a.value.content=p),disabled:!1,class:H("reports-notes"),placeholder:n(u).NOTES},null,8,["modelValue","placeholder"]),n(b).settings.reports.show_location?(_(),m(i,{key:0,placeholder:n(u).LOCATION,value:a.value.location,"onUpdate:value":t[2]||(t[2]=p=>a.value.location=p)},null,8,["placeholder","value"])):E("",!0)]),_:1})}}},X={__name:"BoxMiddle",setup(d){const u=b.locale.REPORTS;return(a,s)=>{const t=l("n-space"),i=l("n-divider");return _(),h(g,null,[r(t,{justify:"space-between"},{default:o(()=>[y("h3",null,T(n(e).tabs[n(e).currentTab].reports.stats.id?n(u).EDIT.replace("{id}","#"+n(e).tabs[n(e).currentTab].reports.stats.id):n(u).EDIT.replace("{id}","")),1),r(j)]),_:1}),r(i),r(q)],64)}}},Y={__name:"BoxRight",setup(d){const u=["officers","citizens","incidents","reports","evidence","vehicles","tags","gallery"],a=t=>{const i=b.settings.reports[`show_${t}`],c=i&&e.tabs[e.currentTab].reports.stats.id?e.tabs[e.currentTab].reports.stats[t]:e.tabs[e.currentTab].reports.new[t],p=()=>{["officers","citizens"].includes(t)?(e.tabs[e.currentTab].shared.addUser.type=t,e.tabs[e.currentTab].shared.addUser.view=!0):["incidents","reports","evidence"].includes(t)?(e.tabs[e.currentTab].shared.addRelated.type=t,e.tabs[e.currentTab].shared.addRelated.view=!0):t==="vehicles"?e.tabs[e.currentTab].shared.searchPlate.view=!0:t==="tags"?(e.tabs[e.currentTab].shared.viewAddTagType="reports",e.tabs[e.currentTab].shared.viewAddTag=!0):t==="gallery"&&(e.tabs[e.currentTab].shared.addToGallery.type="reports",e.tabs[e.currentTab].shared.addToGalleryView=!0)};return{identifier:t,title:b.locale.BOXES[t.toUpperCase()],visible:i,array:c,onClick:p}},s=x(()=>u.map(t=>a(t)).filter(t=>t.visible));return(t,i)=>{const c=l("n-gi"),p=l("n-grid"),f=l("n-scrollbar");return _(),m(f,null,{default:o(()=>[r(p,{"y-gap":"10",cols:1},{default:o(()=>[(_(!0),h(g,null,C(s.value,(v,k)=>(_(),m(c,{key:k},{default:o(()=>[r(M,{name:"reports",identifier:v.identifier,title:v.title,visible:v.visible,array:v.array,onClick:v.onClick},null,8,["identifier","title","visible","array","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})}}},te={__name:"index",setup(d){return(u,a)=>{const s=l("n-gi"),t=l("n-grid");return _(),m(t,{"x-gap":"10",cols:3},{default:o(()=>[r(s,{class:"box"},{default:o(()=>[r(F)]),_:1}),r(s,{class:"box"},{default:o(()=>[r(X)]),_:1}),r(s,{class:"box"},{default:o(()=>[r(Y)]),_:1})]),_:1})}}};export{te as default};
